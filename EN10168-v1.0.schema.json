{
  "meta:license": [
    "Copyright 2020 S1Seven Gmbh. All rights reserved.",
    "This file is licensed to you under the Apache License, Version 2.0 (the 'License');",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at http://www.apache.org/licenses/LICENSE-2.0"
  ],
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://schemas.en10204.io/EN10168-v1.0.schema.json#",
  "definitions": {
    "KeyValueObject": {
      "type": "object",
      "properties": {
        "Key": {
          "type": "string"
        },
        "Value": {
          "type": "string"
        },
        "Unit": {
          "type": "string"
        },
        "Interpretation": {
          "type": "string"
        }
      },
      "required": [
        "Key"
      ],
      "additionalProperties": false
    },
    "ChemicalElement": {
      "type": "object",
      "description": "The chemical elements of the product.",
      "properties": {
        "Symbol": {
          "description": "The symbol of the element",
          "type": "string"
        },
        "Actual": {
          "description": "The measured part of the element as absolute number.",
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "Minimum": {
          "description": "The minimum if defined by the product specification, otherwise the element must not provided.",
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "Maximum": {
          "description": "The maximum as defined by the product specification.",
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      },
      "required": [
        "Symbol",
        "Actual"
      ],
      "additionalProperties": false
    },
    "Tube": {
      "description": "",
      "type": "object",
      "properties": {
        "Form": {
          "description": "",
          "const": "Tube"
        },
        "OuterDiameter": {
          "description": "",
          "type": "number",
          "minimum": 0
        },
        "WallThickness": {
          "description": "",
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "Form",
        "OuterDiameter",
        "WallThickness"
      ],
      "additionalProperties": false
    },
    "QuadraticTube": {
      "description": "",
      "type": "object",
      "properties": {
        "Form": {
          "description": "",
          "const": "QuadraticTube"
        },
        "SideLength": {
          "description": "",
          "type": "number",
          "minimum": 0
        },
        "WallThickness": {
          "description": "",
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "Form",
        "SideLength",
        "WallThickness"
      ],
      "additionalProperties": false
    },
    "RectangularTube": {
      "description": "",
      "type": "object",
      "properties": {
        "Form": {
          "description": "",
          "const": "RectangularTube"
        },
        "Width": {
          "description": "",
          "type": "number",
          "minimum": 0
        },
        "Height": {
          "description": "",
          "type": "number",
          "minimum": 0
        },
        "WallThickness": {
          "description": "",
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "Form",
        "Width",
        "Height",
        "WallThickness"
      ],
      "additionalProperties": false
    },
    "Pipe": {
      "description": "",
      "type": "object",
      "properties": {
        "Form": {
          "description": "",
          "const": "Pipe"
        },
        "SideLength": {
          "description": "",
          "type": "number",
          "minimum": 0
        },
        "WallThickness": {
          "description": "",
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "Form",
        "SideLength",
        "WallThickness"
      ],
      "additionalProperties": false
    },
    "RectangularPipe": {
      "description": "",
      "type": "object",
      "properties": {
        "Form": {
          "description": "",
          "const": "RectangularPipe"
        },
        "Width": {
          "description": "",
          "type": "number",
          "minimum": 0
        },
        "Height": {
          "description": "",
          "type": "number",
          "minimum": 0
        },
        "WallThickness": {
          "description": "",
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "Form",
        "Width",
        "Height",
        "WallThickness"
      ],
      "additionalProperties": true
    },
    "Coil": {
      "description": "",
      "type": "object",
      "properties": {
        "Form": {
          "description": "",
          "const": "Coil"
        },
        "Width": {
          "description": "",
          "type": "number",
          "minimum": 0
        },
        "WallThickness": {
          "description": "",
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "Form",
        "Width",
        "WallThickness"
      ],
      "additionalProperties": true
    },
    "RoundBar": {
      "description": "",
      "type": "object",
      "properties": {
        "Form": {
          "description": "",
          "const": "RoundBar"
        },
        "Diameter": {
          "description": "",
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "Form",
        "Diameter"
      ],
      "additionalProperties": false
    },
    "HexagonalBar": {
      "description": "",
      "type": "object",
      "properties": {
        "Form": {
          "description": "",
          "const": "RoundBar"
        },
        "Diameter": {
          "description": "",
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "Form",
        "Diameter"
      ],
      "additionalProperties": false
    },
    "FlatBar": {
      "description": "",
      "type": "object",
      "properties": {
        "Form": {
          "description": "",
          "const": "FlatBar"
        },
        "Width": {
          "description": "",
          "type": "number",
          "minimum": 0
        },
        "Thickness": {
          "description": "",
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "Form",
        "Width",
        "Thickness"
      ],
      "additionalProperties": false
    },
    "Other": {
      "description": "",
      "type": "object",
      "properties": {
        "Form": {
          "description": "",
          "const": "Other"
        },
        "Description": {
          "description": "",
          "type": "string"
        }
      },
      "required": [
        "Form",
        "Description"
      ],
      "additionalProperties": false
    },
    "ProductDescription": {
      "type": "object",
      "oneOf": [
        {
          "description": "",
          "$ref": "#/definitions/Tube"
        },
        {
          "description": "",
          "$ref": "#/definitions/RectangularTube"
        },
        {
          "description": "",
          "$ref": "#/definitions/QuadraticTube"
        },
        {
          "description": "",
          "$ref": "#/definitions/Pipe"
        },
        {
          "description": "",
          "$ref": "#/definitions/RectangularPipe"
        },
        {
          "description": "",
          "$ref": "#/definitions/Coil"
        },
        {
          "description": "",
          "$ref": "#/definitions/RoundBar"
        },
        {
          "description": "",
          "$ref": "#/definitions/HexagonalBar"
        },
        {
          "description": "",
          "$ref": "#/definitions/FlatBar"
        },
        {
          "description": "",
          "$ref": "#/definitions/Other"
        }
      ]
    },
    "Company": {
      "type": "object",
      "properties": {
        "CompanyName": {
          "type": "string"
        },
        "Street": {
          "type": "string"
        },
        "ZipCode": {
          "type": "string"
        },
        "City": {
          "type": "string"
        },
        "Country": {
          "type": "string",
          "minLength": 2,
          "maxLength": 2
        },
        "VAT_Id": {
          "type": "string",
          "minLength": 4,
          "maxLength": 15
        },
        "Email": {
          "type": "string",
          "format": "email"
        },
        "CertificateLanguage": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "EN",
              "DE",
              "FR",
              "PL"
            ]
          },
          "minItems": 1,
          "maxItems": 2,
          "uniqueItems": true
        },
        "AdditionalInformation": {
          "description": "Each entry to the array is rendered as a new line in HTML and PDF",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "CompanyName",
        "Street",
        "ZipCode",
        "City",
        "Country",
        "Email"
      ],
      "additionalProperties": true
    },
    "Measurement": {
      "type": "object",
      "description": "Measured Values in a structured fashion for easy processing and rendering of data",
      "properties": {
        "Property": {
          "description": "The property measured",
          "type": "string"
        },
        "Value": {
          "description": "A measured or calculated Value (e.g. mean of individual measurements).",
          "type": "number"
        },
        "Minimum": {
          "description": "The lower limit according product specification. If not provided it is 0.",
          "type": "number"
        },
        "Maximum": {
          "description": "The upper limit according product specification. If not provided it is ∞.",
          "type": "number"
        },
        "Unit": {
          "description": "The Unit of Value.",
          "type": "string"
        }
      },
      "required": [
        "Value"
      ],
      "additionalProperties": false
    }
  },
  "title": "Certificate",
  "type": "object",
  "properties": {
    "metadata": {
      "description": "",
      "type": "object",
      "properties": {
        "id": {
          "description": "",
          "type": "string"
        },
        "version": {
          "description": "",
          "type": "integer",
          "minimum": 0
        },
        "state": {
          "description": "",
          "type": "string",
          "enum": [
            "draft",
            "valid",
            "cancelled"
          ]
        }
      },
      "required": [
        "id"
      ]
    },
    "Certificate": {
      "description": "",
      "type": "object",
      "required": [
        "CommercialTransaction",
        "ProductDescription",
        "Inspection",
        "OtherTests",
        "Validation"
      ],
      "properties": {
        "CommercialTransaction": {
          "description": "",
          "type": "object",
          "properties": {
            "A01": {
              "description": "The manufacturer's works which delivers the certificate along the product",
              "$ref": "#/definitions/Company"
            },
            "A02": {
              "description": "The type of inspection document, e.g. 'EN 10204 3.1 Certificate'",
              "type": "string"
            },
            "A03": {
              "description": "The document number of the certifcate",
              "type": "string"
            },
            "A04": {
              "description": "The mark of the manufacturer as base64 png file. The maximum size is <TBD>",
              "type": "string",
              "contentEncoding": "base64",
              "contentMediaType": "image/png"
            },
            "A05": {
              "description": "The originator of the document, not necessarily equal to A01",
              "type": "string",
              "default": "Factory Production Control"
            },
            "A06": {
              "description": "The purchaser of the product and receiver of the certificate",
              "$ref": "#/definitions/Company"
            },
            "A06.1": {
              "description": "The purchaser of the product",
              "$ref": "#/definitions/Company"
            },
            "A06.2": {
              "description": "The consignee of the product",
              "$ref": "#/definitions/Company"
            },
            "A06.3": {
              "description": "The receiver/consignee of the certificate",
              "$ref": "#/definitions/Company"
            },
            "A07": {
              "description": "Purchase number",
              "type": "string"
            },
            "A08": {
              "description": "Manufacturer's work number",
              "type": "string"
            },
            "A09": {
              "description": "The article number used by the purchaser",
              "type": "string"
            },
            "SupplementaryInformation": {
              "type": "object",
              "propertyNames": {
                "pattern": "A1[0-9]|A[2-8][0-9]|A[2-9][0-7]"
              },
              "patternProperties": {
                "": {
                  "$ref": "#/definitions/KeyValueObject"
                }
              },
              "additionalProperties": false
            },
            "A97": {
              "description": "The position number in the order",
              "type": "number"
            },
            "A98": {
              "description": "A custom field for the delivery note number",
              "type": "string"
            },
            "A99": {
              "description": "A custom field for the aviso document number",
              "type": "string"
            },
            "additionalProperties": false
          },
          "additionalProperties": false
        },
        "ProductDescription": {
          "type": "object",
          "properties": {
            "B01": {
              "description": "The product",
              "type": "string"
            },
            "B02": {
              "description": "",
              "type": "object",
              "properties": {
                "ProductNorm": {
                  "description": "The product norm designation",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "MaterialNorm": {
                  "description": "The material norm(s)",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "MassNorm": {
                  "description": "The mass norm(s)",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "SteelDesignation": {
                  "description": "The steel designation(s)",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            },
            "B03": {
              "description": "Any supplemantary requirements",
              "type": "string"
            },
            "B04": {
              "description": "The delivery conditions for the product",
              "type": "string"
            },
            "B05": {
              "description": "Reference heat treatment of samples",
              "type": "string"
            },
            "B06": {
              "description": "Marking of the product",
              "type": "string"
            },
            "B07": {
              "description": "Identification of the product, usually batch, charge or lot number",
              "type": "string"
            },
            "B08": {
              "description": "Number of pieces of the product.",
              "type": "number"
            },
            "B09": {
              "description": "Product type and its describing dimensional parameters",
              "$ref": "#/definitions/ProductDescription"
            },
            "B10": {
              "description": "Product dimensions - length of the product",
              "type": "number"
            },
            "B11": {
              "description": "Product dimensions ",
              "type": "number"
            },
            "B12": {
              "description": "Theoretical mass",
              "type": "number"
            },
            "B13": {
              "description": "Actual mass",
              "type": "number"
            },
            "SupplementaryInformation": {
              "type": "object",
              "propertyNames": {
                "pattern": "B1[4-9]|B[2-9][0-9]"
              },
              "patternProperties": {
                "": {
                  "$ref": "#/definitions/KeyValueObject"
                }
              }
            },
            "additionalProperties": false
          },
          "required": [
            "B01",
            "B02",
            "B07",
            "B08"
          ],
          "additionalProperties": false
        },
        "Inspection": {
          "type": "object",
          "properties": {
            "C00": {
              "description": "Heat or melt number defining the chemical properties",
              "type": "string"
            },
            "C01": {
              "description": "Location of the sample",
              "type": "string"
            },
            "C02": {
              "description": "Direction of the test pieces",
              "type": "string"
            },
            "C03": {
              "description": "Test temperature",
              "type": "string"
            },
            "SupplementaryInformation": {
              "type": "object",
              "propertyNames": {
                "pattern": "^C0[4-9]"
              },
              "patternProperties": {
                "": {
                  "$ref": "#/definitions/KeyValueObject"
                }
              }
            },
            "TensileTest": {
              "type": "object",
              "properties": {
                "C10": {
                  "description": "Shape of the test piece",
                  "type": "string"
                },
                "C11": {
                  "description": "Yield or proof strength",
                  "$ref": "#/definitions/Measurement"
                },
                "C12": {
                  "description": "Tensile strength",
                  "$ref": "#/definitions/Measurement"
                },
                "C13": {
                  "description": "Elongation after fracture",
                  "$ref": "#/definitions/Measurement"
                },
                "SupplementaryInformation": {
                  "type": "object",
                  "propertyNames": {
                    "pattern": "^C1[4-9]|C2[0-9]"
                  },
                  "patternProperties": {
                    "": {
                      "$ref": "#/definitions/KeyValueObject"
                    }
                  }
                }
              }
            },
            "HardnessTest": {
              "type": "object",
              "properties": {
                "C30": {
                  "description": "Method of test",
                  "type": "string"
                },
                "C31": {
                  "description": "The individual values measured",
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/Measurement"
                  }
                },
                "C32": {
                  "description": "The average value of the individual values measured",
                  "$ref": "#/definitions/Measurement"
                },
                "SupplementaryInformation": {
                  "type": "object",
                  "propertyNames": {
                    "pattern": "^C3[3-9]"
                  },
                  "patternProperties": {
                    "": {
                      "$ref": "#/definitions/KeyValueObject"
                    }
                  }
                }
              }
            },
            "NotchedBarImpactTest": {
              "type": "object",
              "properties": {
                "C40": {
                  "description": "Type of test piece",
                  "type": "string"
                },
                "C41": {
                  "description": "Width of test piece",
                  "type": "string"
                },
                "C42": {
                  "description": "Individual values",
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/Measurement"
                  }
                },
                "C43": {
                  "description": "Mean value",
                  "$ref": "#/definitions/Measurement"
                },
                "SupplementaryInformation": {
                  "type": "object",
                  "propertyNames": {
                    "pattern": "^C4[4-9]"
                  },
                  "patternProperties": {
                    "": {
                      "$ref": "#/definitions/KeyValueObject"
                    }
                  }
                }
              }
            },
            "OtherMechanicalTests": {
              "type": "object",
              "propertyNames": {
                "pattern": "^C[5-6][0-9]"
              },
              "patternProperties": {
                "": {
                  "$ref": "#/definitions/KeyValueObject"
                }
              }
            },
            "ChemicalComposition": {
              "type": "object",
              "properties": {
                "C70": {
                  "description": "The metallurgic process, which is restricted to 2 types: Y = Basic oxygen process, E = Electric furnace",
                  "enum": [
                    "Y",
                    "E"
                  ]
                },
                "C71": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C72": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C73": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C74": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C75": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C76": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C77": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C78": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C79": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C80": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C81": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C82": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C83": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C84": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C85": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C86": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C87": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C88": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C89": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C90": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C91": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C92": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C93": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C94": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C95": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C96": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C97": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C98": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C99": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C100": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C101": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C102": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C103": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C104": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C105": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C106": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C107": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C108": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "C109": {
                  "description": "Share of element",
                  "$ref": "#/definitions/ChemicalElement"
                },
                "SupplementaryInformation": {
                  "type": "object",
                  "propertyNames": {
                    "pattern": "^C11[0-9]"
                  },
                  "patternProperties": {
                    "": {
                      "$ref": "#/definitions/KeyValueObject"
                    }
                  }
                },
                "additionalProperties": false
              },
              "additionalProperties": false
            }
          },
          "required": [
            "C00",
            "ChemicalComposition"
          ],
          "additionalProperties": false
        },
        "OtherTests": {
          "type": "object",
          "properties": {
            "D01": {
              "description": "Marking and identification, surface appearance, shape and dimensional properties",
              "type": "string"
            },
            "NonDestructiveTests": {
              "type": "object",
              "propertyNames": {
                "pattern": "^D[0][2-9]|^D[1-4]D[0-9]"
              },
              "patternProperties": {
                "": {
                  "$ref": "#/definitions/KeyValueObject"
                }
              },
              "additionalProperties": false
            },
            "SupplementaryInformation": {
              "type": "object",
              "propertyNames": {
                "pattern": "^D[5-9][0-9]"
              },
              "patternProperties": {
                "": {
                  "$ref": "#/definitions/KeyValueObject"
                }
              },
              "additionalProperties": false
            },
            "additionalProperties": false
          }
        },
        "Validation": {
          "type": "object",
          "properties": {
            "Z01": {
              "description": "Statement of compliance",
              "type": "string"
            },
            "Z02": {
              "description": "Date of issue and validation",
              "type": "string",
              "format": "date-time"
            },
            "Z03": {
              "description": "Stamp of the inspection representative",
              "type": "string"
            },
            "Z04": {
              "description": "CE marking",
              "type": "object",
              "properties": {
                "CE_Image": {
                  "description": "The CE image as base64 encoded png file. A default with size 90x65 is provided by example",
                  "type": "string",
                  "contentEncoding": "base64",
                  "contentMediaType": "image/png"
                },
                "NotifiedBodyNumber": {
                  "description": "The identification number of the Notified body. Refer to https://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:31993L0068:en:HTML and https://ec.europa.eu/growth/tools-databases/nando/index.cfm?fuseaction=notifiedbody.main",
                  "type": "string"
                },
                "DoCYear": {
                  "description": "The year when the declaration of conformance was issued",
                  "type": "string"
                },
                "DoCNumber": {
                  "description": "The declaration of conformance document number ",
                  "type": "string"
                }
              },
              "required": [
                "CE_Image",
                "NotifiedBodyNumber",
                "DoCYear",
                "DoCNumber"
              ]
            },
            "SupplementaryInformation": {
              "type": "object",
              "propertyNames": {
                "pattern": "Z0[5-9]|Z[1-9][0-9]"
              },
              "patternProperties": {
                "": {
                  "$ref": "#/definitions/KeyValueObject"
                }
              }
            }
          },
          "required": [
            "Z01",
            "Z02",
            "Z04"
          ],
          "additionalProperties": false
        }
      }
    }
  }
}